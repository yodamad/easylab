{{define "title"}}OVH Credentials Configuration{{end}}
{{define "body-class"}}{{end}}
{{define "head-extra"}}
<script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.0/dist/htmx.min.js" integrity="sha384-LAnQFtNXh8s0hn9mOc8bezfn16i4Zo4y3i4dMT8PtV9yip8jGehR3RxCJrmHV11d" crossorigin="anonymous"></script>
{{end}}

{{define "body"}}
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-title">
                    <img src="/static/logo.png" alt="EasyLab Logo" class="header-logo">
                    <div>
                        <h1>OVH Credentials Configuration</h1>
                        <p class="subtitle">Configure your OVHcloud API credentials</p>
                    </div>
                </div>
                <div class="header-actions">
                    <a href="/labs" class="header-btn" title="Labs History">
                        <span class="btn-icon">üìã</span>
                        <span class="btn-text">Labs</span>
                    </a>
                    <a href="/admin" class="btn btn-secondary">
                        <span class="btn-icon">‚Üê</span> Back to Labs
                    </a>
                    <a href="/logout" class="logout-btn" title="Logout">
                        <span class="logout-icon">üö™</span>
                        <span class="logout-text">Logout</span>
                    </a>
                </div>
            </div>
        </header>

        <main>
            <div class="credentials-container">
                <div class="info-box">
                    <h3>‚ÑπÔ∏è About OVH Credentials</h3>
                    <p>These credentials will be stored in memory and used for all lab deployments. They will be cleared when the application restarts.</p>
                    <p><strong>Note:</strong> Credentials are not persisted to disk for security reasons.</p>
                </div>

                <form id="credentials-form" action="/api/ovh-credentials" method="POST" enctype="application/x-www-form-urlencoded" hx-post="/api/ovh-credentials" hx-target="#form-response" hx-swap="innerHTML" hx-indicator="#loading" hx-boost="false">
                    <div id="form-response"></div>
                    <div id="loading" class="htmx-indicator">
                        <div class="spinner"></div>
                        <p>Saving credentials...</p>
                    </div>

                    <div class="form-section">
                        <h2>OVH API Credentials</h2>
                        
                        <div class="form-group">
                            <label for="ovh_application_key">Application Key *</label>
                            <input type="password" id="ovh_application_key" name="ovh_application_key" required>
                            <small>Your OVHcloud application key</small>
                        </div>

                        <div class="form-group">
                            <label for="ovh_application_secret">Application Secret *</label>
                            <input type="password" id="ovh_application_secret" name="ovh_application_secret" required>
                            <small>Your OVHcloud application secret</small>
                        </div>

                        <div class="form-group">
                            <label for="ovh_consumer_key">Consumer Key *</label>
                            <input type="password" id="ovh_consumer_key" name="ovh_consumer_key" required>
                            <small>Your OVHcloud consumer key</small>
                        </div>

                        <div class="form-group">
                            <label for="ovh_service_name">Service Name (Project ID) *</label>
                            <input type="text" id="ovh_service_name" name="ovh_service_name" required>
                            <small>Your OVHcloud project ID (service name)</small>
                        </div>

                        <div class="form-group">
                            <label for="ovh_endpoint">OVH Endpoint *</label>
                            <select id="ovh_endpoint" name="ovh_endpoint" required>
                                <option value="ovh-eu">ovh-eu (Europe)</option>
                                <option value="ovh-us">ovh-us (United States)</option>
                                <option value="ovh-ca">ovh-ca (Canada)</option>
                            </select>
                            <small>Select your OVHcloud region endpoint</small>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <span class="btn-icon">üíæ</span> Save Credentials
                        </button>
                        <button type="button" id="btn-check" class="btn btn-secondary" onclick="checkCredentials()">
                            <span class="btn-icon">‚úì</span> Check Status
                        </button>
                    </div>
                </form>

                <div id="status-container" class="status-container" style="display: none;">
                    <h3>Current Status</h3>
                    <div id="status-content"></div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/ovh-credentials.js"></script>
{{end}}

