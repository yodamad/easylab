{{define "title"}}Provider Credentials Configuration{{end}}
{{define "body-class"}}{{end}}
{{define "head-extra"}}
<script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.0/dist/htmx.min.js" integrity="sha384-LAnQFtNXh8s0hn9mOc8bezfn16i4Zo4y3i4dMT8PtV9yip8jGehR3RxCJrmHV11d" crossorigin="anonymous"></script>
{{end}}

{{define "body"}}
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-title">
                    <img src="/static/logo.png" alt="EasyLab Logo" class="header-logo">
                    <div>
                        <h1>Provider Credentials Configuration</h1>
                        <p class="subtitle">Configure your cloud provider API credentials</p>
                    </div>
                </div>
                <div class="header-actions">
                    <a href="/jobs" class="header-btn" title="Jobs History">
                        <span class="btn-icon">üìã</span>
                        <span class="btn-text">Jobs</span>
                    </a>
                    <a href="/admin" class="btn btn-secondary">
                        <span class="btn-icon">‚Üê</span> Back to Labs
                    </a>
                    <a href="/logout" class="logout-btn" title="Logout">
                        <span class="logout-icon">üö™</span>
                        <span class="logout-text">Logout</span>
                    </a>
                </div>
            </div>
        </header>

        <main>
            <div class="credentials-container">
                <div class="info-box">
                    <h3>‚ÑπÔ∏è About Provider Credentials</h3>
                    <p>These credentials will be stored in memory and used for all lab deployments. They will be cleared when the application restarts.</p>
                    <p><strong>Note:</strong> Credentials are not persisted to disk for security reasons.</p>
                </div>

                <!-- Provider Selector -->
                <div class="form-group" style="margin-bottom: 2rem;">
                    <label for="provider-select">Select Provider</label>
                    <select id="provider-select" onchange="switchProvider()">
                        <option value="ovh">OVHcloud</option>
                        <!-- Future providers can be added here:
                        <option value="aws">Amazon Web Services (AWS)</option>
                        <option value="azure">Microsoft Azure</option>
                        <option value="gcp">Google Cloud Platform (GCP)</option>
                        -->
                    </select>
                    <small>Choose the cloud provider to configure credentials for</small>
                </div>

                <!-- OVH Provider Section -->
                <div id="provider-section-ovh" class="provider-section">
                    <form id="credentials-form-ovh" action="/api/credentials" method="POST" enctype="application/x-www-form-urlencoded" hx-post="/api/credentials" hx-target="#form-response-ovh" hx-swap="innerHTML" hx-indicator="#loading-ovh" hx-boost="false">
                        <input type="hidden" name="provider" value="ovh">
                        <div id="form-response-ovh"></div>
                        <div id="loading-ovh" class="htmx-indicator">
                            <div class="spinner"></div>
                            <p>Saving credentials...</p>
                        </div>

                        <div class="form-section">
                            <h2>OVH API Credentials</h2>
                            
                            <div class="form-group">
                                <label for="ovh_application_key">Application Key *</label>
                                <input type="password" id="ovh_application_key" name="ovh_application_key" required>
                                <small>Your OVHcloud application key</small>
                            </div>

                            <div class="form-group">
                                <label for="ovh_application_secret">Application Secret *</label>
                                <input type="password" id="ovh_application_secret" name="ovh_application_secret" required>
                                <small>Your OVHcloud application secret</small>
                            </div>

                            <div class="form-group">
                                <label for="ovh_consumer_key">Consumer Key *</label>
                                <input type="password" id="ovh_consumer_key" name="ovh_consumer_key" required>
                                <small>Your OVHcloud consumer key</small>
                            </div>

                            <div class="form-group">
                                <label for="ovh_service_name">Service Name (Project ID) *</label>
                                <input type="text" id="ovh_service_name" name="ovh_service_name" required>
                                <small>Your OVHcloud project ID (service name)</small>
                            </div>

                            <div class="form-group">
                                <label for="ovh_endpoint">OVH Endpoint *</label>
                                <select id="ovh_endpoint" name="ovh_endpoint" required>
                                    <option value="ovh-eu">ovh-eu (Europe)</option>
                                    <option value="ovh-us">ovh-us (United States)</option>
                                    <option value="ovh-ca">ovh-ca (Canada)</option>
                                </select>
                                <small>Select your OVHcloud region endpoint</small>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <span class="btn-icon">üíæ</span> Save Credentials
                            </button>
                            <button type="button" id="btn-check-ovh" class="btn btn-secondary" onclick="checkCredentials('ovh')">
                                <span class="btn-icon">‚úì</span> Check Status
                            </button>
                        </div>
                    </form>

                    <div id="status-container-ovh" class="status-container" style="display: none;">
                        <h3>Current Status</h3>
                        <div id="status-content-ovh"></div>
                    </div>
                </div>

                <!-- AWS Provider Section (Future) -->
                <div id="provider-section-aws" class="provider-section" style="display: none;">
                    <form id="credentials-form-aws" action="/api/credentials" method="POST" enctype="application/x-www-form-urlencoded" hx-post="/api/credentials" hx-target="#form-response-aws" hx-swap="innerHTML" hx-indicator="#loading-aws" hx-boost="false">
                        <input type="hidden" name="provider" value="aws">
                        <div id="form-response-aws"></div>
                        <div id="loading-aws" class="htmx-indicator">
                            <div class="spinner"></div>
                            <p>Saving credentials...</p>
                        </div>

                        <div class="form-section">
                            <h2>AWS Credentials</h2>
                            <div class="info-box">
                                <p>AWS provider support coming soon.</p>
                            </div>
                            
                            <!-- AWS fields will be added here when implemented
                            <div class="form-group">
                                <label for="aws_access_key_id">Access Key ID *</label>
                                <input type="password" id="aws_access_key_id" name="aws_access_key_id" required>
                                <small>Your AWS access key ID</small>
                            </div>

                            <div class="form-group">
                                <label for="aws_secret_access_key">Secret Access Key *</label>
                                <input type="password" id="aws_secret_access_key" name="aws_secret_access_key" required>
                                <small>Your AWS secret access key</small>
                            </div>

                            <div class="form-group">
                                <label for="aws_region">Region *</label>
                                <select id="aws_region" name="aws_region" required>
                                    <option value="us-east-1">us-east-1 (N. Virginia)</option>
                                    <option value="us-west-2">us-west-2 (Oregon)</option>
                                    <option value="eu-west-1">eu-west-1 (Ireland)</option>
                                    <option value="eu-central-1">eu-central-1 (Frankfurt)</option>
                                </select>
                                <small>Select your AWS region</small>
                            </div>
                            -->
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" disabled>
                                <span class="btn-icon">üíæ</span> Save Credentials
                            </button>
                            <button type="button" id="btn-check-aws" class="btn btn-secondary" onclick="checkCredentials('aws')" disabled>
                                <span class="btn-icon">‚úì</span> Check Status
                            </button>
                        </div>
                    </form>

                    <div id="status-container-aws" class="status-container" style="display: none;">
                        <h3>Current Status</h3>
                        <div id="status-content-aws"></div>
                    </div>
                </div>

                <!-- Azure Provider Section (Future) -->
                <div id="provider-section-azure" class="provider-section" style="display: none;">
                    <div class="form-section">
                        <h2>Azure Credentials</h2>
                        <div class="info-box">
                            <p>Azure provider support coming soon.</p>
                        </div>
                    </div>
                </div>

                <!-- GCP Provider Section (Future) -->
                <div id="provider-section-gcp" class="provider-section" style="display: none;">
                    <div class="form-section">
                        <h2>Google Cloud Credentials</h2>
                        <div class="info-box">
                            <p>Google Cloud Platform provider support coming soon.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/credentials.js"></script>
{{end}}
